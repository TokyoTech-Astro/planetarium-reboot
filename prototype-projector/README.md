# Projector Prototype

投影筒まわりを新しくするための試作

[開発記録](https://github.com/TokyoTech-Astro/planetarium-reboot/discussions/7)

### Concept

```mermaid
flowchart TB
  subgraph 構造球基板
    A(ルータ) --> |WiFi| B(マイコン)
    B --> |UART| C(RS485ドライバ)
  end

  subgraph 投影筒基板1
    D1(RS485ドライバ) --> |UART| E1(マイコン)
    E1 --> |PWM| F1(LEDドライバ)
    F1 --> G1(パワーLED)
  end

  subgraph 投影筒基板2
    D2(RS485ドライバ) --> |UART| E2(マイコン)
    E2 --> |PWM| F2(LEDドライバ)
    F2 --> G2(パワーLED)
  end

  構造球基板 --> |DMX| 投影筒基板1 --> |DMX| 投影筒基板2
```

### Idea

- スイッチング方式のLEDドライバを用いる。
  
  - 効率が良い。電流を減らせる。
  - セメント抵抗より小さくできる。
  - 調光できる。

- 点灯回路を投影筒に内臓する。

  - 基板分割で故障や仕様変更への保守性が上がる。
  - 構造球中央に大きな基板をおかなくて済む。
  - デバッグのために投影筒単体で動作させやすい。

- DMX512を用いた調光制御。
  
  - デイジーチェインで拡張性が高い。星座絵や一等星を同一バス上に配置したい。
  - DMA512はAddressibleで制御しやすい。
  - RS485の差動信号なので長距離伝送とノイズに強い。

- 投影筒単体で無線制御可能なサブシステムとする。

  - モータや昼光と分離してシンプルなサブシステムにする。
  - 使いやすいように汎用的な通信プロトコルにする。( WiFi + REST API ? )

- 12V 駆動化

  - 高電圧 + スイッチング駆動で電流を減らせる。-> 損失減、配線に有利。

- 部品は可能な限り秋月等で入手できるようにする。
